---
layout: post
title: 无限滚动列表
tag: UI
---
今天在做项目的时候，遇到一个问题，就是当数据量有成千上万行的时候，想要通过滚动列表实现的时候，不可能去实例化成千上万个Cell,这样对内存和效率都是暴击。那么唯一能做的就是把有限个Item在列表里不停的重复使用，来实现无限滚动。

NGUI下的滚动列表是用scrollview加grid或者table来实现的，在滑动列表的时候，grid是没有位移的，发生位移的是scrollview本身。grid底下的cell是按照CellWidth或者CellHeight来进行排序的。比如说我设置grid只有1列，cellHeight是100，那么第一个cell的位置是`（0，0，0）`,第二个cell的位置就是`（0,-100,0）`,第三个cell的位置是`(0,-200,0)`,以此内推。垂直滚动的效果是通过scrollView沿Y轴移动来是实现的，grid作为scrollview的子节点，因此也跟着移动了，所以下边的cell会随着滚动出现在屏幕中间，同理，原来屏幕中间的cell就会滚动出屏幕。所以，无限滚动的原理就是当你使列表向上滑动时，把超出屏幕上边缘的cell移动到grid的最下方，当你使列表向下滑动时，把超出屏幕下边缘的cell，移动到grid的最上方，这样，就能用有限个Cell实现无限滑动啦。

工程地址参见：<a href="https://github.com/yrsc/UnlimitedGrid" target="_blank">https://github.com/yrsc/UnlimitedGrid</a>
